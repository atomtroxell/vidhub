jQuery(document).ready(function(o){var a,t,d,i,l,r,s=void 0;o("body").append('<div class="modal-overlay" tabindex="-1"></div>');var n=[];if(o(".modal").each(function(){o(this).attr("hidden","hidden").attr("role","dialog").attr("tabindex","-1"),n.push(o(this).attr("id"))}),window.location.hash){var e=window.location.hash.substr(1);"-1"!=jQuery.inArray(e,n)&&(i=o(t="#"+(d=e)).clone(),void 0!==(r=o(t).attr("data-modal-height"))&&!1!==r&&o(t).css({height:r+"px","min-height":"calc("+r+"px - 40px)"}),o(t).hasClass("modal-inline")?(o(t).parent().addClass("modal-inline-parent"),o("html, body").toggleClass("modal-open"),o(".modal-overlay").toggleClass("show-modal modal-inline"),o(t).toggleClass("show-modal"),o(t).removeAttr("hidden").attr("aria-hidden","false").attr("tabindex","0"),o(".modal-content .close-modal").addClass("modal-inline").attr("tabindex","0"),o(t).focus(),l=o(t+" > .modal-content"),c()):(i=o(t).clone(),o(t).replaceWith('<span data-modalid="'+d+'" aria-hidden="true" hidden></span>'),a()))}function a(){o(".modal-overlay").after(i),o("html, body").toggleClass("modal-open"),o(".modal-overlay").toggleClass("show-modal"),o(t).toggleClass("show-modal"),o(t).removeAttr("hidden").attr("aria-hidden","false").attr("tabindex","0"),o(".modal-content .close-modal").attr("tabindex","0"),o(t).focus(),l=o(t+" > .modal-content"),c()}function c(){var e=o("span.close-modal, a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]",l),a=e.first(),t=e.last();t.on("keydown",function(e){9!==e.which||e.shiftKey||(e.preventDefault(),a.focus())}),a.on("keydown",function(e){9===e.which&&e.shiftKey&&(e.preventDefault(),t.focus())})}o(document).on("click",".open-modal",function(e){e.preventDefault(),s=o(this),t=o(this).attr("href"),d=t.replace(/^#/,""),r=o(t).attr("data-modal-height"),"-1"!=jQuery.inArray(d,n)&&(void 0!==r&&!1!==r&&o(t).css({height:r+"px","min-height":"calc("+r+"px - 40px)"}),o(s).hasClass("modal-inline")?(o(t).parent().addClass("modal-inline-parent"),o("html, body").toggleClass("modal-open"),o(".modal-overlay").insertAfter(t).toggleClass("show-modal modal-inline"),o(t).toggleClass("show-modal"),o(t).removeAttr("hidden").attr("aria-hidden","false").attr("tabindex","0"),o(".close-modal",t).addClass("modal-inline").attr("tabindex","0"),o(t).focus(),l=o(t+" > .modal-content"),c()):(i=o(t).clone(),o(t).replaceWith('<span data-modalid="'+d+'" aria-hidden="true" hidden></span>'),a()))}),o(document).keydown(function(e){o(e.target).is(".modal")&&9===e.keyCode&&(l=o(t+" > .modal-content"),c())}),o(".modal-overlay").on("click",function(){o("html, body").removeClass("modal-open"),o(this).removeClass("show-modal"),o(this).hasClass("modal-inline")?(o(t).parent().removeClass("modal-inline-parent"),o(t).removeClass("show-modal"),o(t).attr("hidden","hidden").attr("aria-hidden","true").attr("tabindex","-1")):(i.remove(),o('span[data-modalid="'+d+'"]').replaceWith(i),o(t).attr("hidden","hidden").attr("aria-hidden","true").attr("tabindex","-1"),o(".modal").removeClass("show-modal")),void 0!==s&&(s.focus(),s=void 0)}),o(".modal-content *:not(.close-modal)").on("click",function(e){e.stopPropagation()}),o(document).on("click",".close-modal",function(){o("html, body").removeClass("modal-open"),o(".modal-overlay").removeClass("show-modal"),o(this).hasClass("modal-inline")?(o(t).parent().removeClass("modal-inline-parent"),o(t).removeClass("show-modal"),o(t).attr("hidden","hidden").attr("aria-hidden","true").attr("tabindex","-1")):(i.remove(),o('span[data-modalid="'+d+'"]').replaceWith(i),o(t).attr("hidden","hidden").attr("aria-hidden","true").attr("tabindex","-1"),o(".modal").removeClass("show-modal")),null!=s&&(s.focus(),s=void 0)}),o(document).keydown(function(e){o(e.target).is(".close-modal")&&13===e.keyCode&&(o("html, body").removeClass("modal-open"),o(".modal-overlay").removeClass("show-modal"),o(".modal-overlay").hasClass("modal-inline")?(o(t).parent().removeClass("modal-inline-parent"),o(t).removeClass("show-modal"),o(t).attr("hidden","hidden").attr("aria-hidden","true").attr("tabindex","-1")):(i.remove(),o('span[data-modalid="'+d+'"]').replaceWith(i),o(t).attr("hidden","hidden").attr("aria-hidden","true").attr("tabindex","-1"),o(".modal").removeClass("show-modal")),void 0!==s&&(s.focus(),s=void 0))}),o(document).on("keyup",function(e){27===e.keyCode&&(e.preventDefault(),o("body").hasClass("modal-open")&&(o("html, body").removeClass("modal-open"),o(".modal-overlay").removeClass("show-modal"),o(".modal-overlay").hasClass("modal-inline")?(o(t).parent().removeClass("modal-inline-parent"),o(t).removeClass("show-modal"),o(t).attr("hidden","hidden").attr("aria-hidden","true").attr("tabindex","-1")):(i.remove(),o('span[data-modalid="'+d+'"]').replaceWith(i),o(t).attr("hidden","hidden").attr("aria-hidden","true").attr("tabindex","-1"),o(".modal").removeClass("show-modal")),void 0!==s&&(s.focus(),s=void 0)))})}),$(function(){function a(){window.location.reload()}var t,e;$("#save").on("click",function(){var e=[];$.each($('input[name="service"]:checked'),function(){e.push({id:$(this).val(),title:$(this).attr("data-title"),logo:$(this).attr("data-logo"),url:$(this).attr("data-url"),background:$(this).attr("data-background")})}),$("#rememberRecent").is(":checked")?localStorage.setItem("vidhubServicesRememberRecent","show"):localStorage.removeItem("vidhubServicesRememberRecent"),localStorage.setItem("vidhubServices",JSON.stringify(e)),a()}),$("#clear").on("click",function(){localStorage.removeItem("vidhubServices"),localStorage.removeItem("vidhubServicesRememberRecent"),localStorage.removeItem("vidhubServicesLastViewed"),a()}),null===localStorage.getItem("vidhubServices")?$.ajax({url:"/services.json",dataType:"text",success:function(e){t=JSON.parse(e);for(var a=0;a<t.length;++a)$(".services").append('<div><span class="service '+t[a].title+'" href="#" data-title="'+t[a].title+'" data-url="'+t[a].url+'" aria-label="'+t[a].title+'" style="'+t[a].background+'"><span class="logo" style="background-image:url('+t[a].logo+')"></span></span></div>'),$(".services-list").append('<div class="sm-full md-half"><input type="checkbox" id="'+t[a].id+'" data-title="'+t[a].title+'" data-logo="'+t[a].logo+'" data-url="'+t[a].url+'" data-background="'+t[a].background+'" value="'+t[a].id+'" name="service"><label for="'+t[a].id+'">'+t[a].title+"</label></div>")}}):(e=localStorage.getItem("vidhubServices"),vidhubServicesRememberRecent=localStorage.getItem("vidhubServicesRememberRecent"),vidhubServicesLocal=JSON.parse(e),$.ajax({url:"/services.json",dataType:"text",success:function(e){t=JSON.parse(e);for(var a=0;a<t.length;++a)$(".services-list").append('<div class="sm-full md-half"><input type="checkbox" id="'+t[a].id+'" data-title="'+t[a].title+'" data-logo="'+t[a].logo+'" data-url="'+t[a].url+'" data-background="'+t[a].background+'" value="'+t[a].id+'" name="service"><label for="'+t[a].id+'">'+t[a].title+"</label></div>");!function(){for(var e=0;e<vidhubServicesLocal.length;++e)$(".services").append('<div><span class="service '+vidhubServicesLocal[e].title+'" href="#" aria-label="'+vidhubServicesLocal[e].title+'" data-title="'+vidhubServicesLocal[e].title+'" data-url="'+vidhubServicesLocal[e].url+'" style="'+vidhubServicesLocal[e].background+'"><span class="logo" style="background-image:url('+vidhubServicesLocal[e].logo+')"></span></span></div>'),$('.services-list input[type="checkbox"]#'+vidhubServicesLocal[e].id).prop("checked",!0)}()}}),"show"===vidhubServicesRememberRecent?$('input[id="rememberRecent"]').prop("checked",!0):$('input[id="rememberRecent"]').prop("checked",!1)),function(){if($("body").on("click",".services .service",function(){var e=$(this).attr("data-url"),a=[];a.push({title:$(this).attr("data-title"),url:$(this).attr("data-url")}),localStorage.setItem("vidhubServicesLastViewed",JSON.stringify(a)),window.location.href=e}),vidhubServicesLastViewed=localStorage.getItem("vidhubServicesLastViewed"),"vidhubServicesLastViewed"in localStorage){$("body").addClass("show-recent"),$(".last-viewed").show(),vidhubServicesLastViewedLocal=JSON.parse(vidhubServicesLastViewed);for(var e=0;e<vidhubServicesLastViewedLocal.length;++e)$(".last-viewed").attr("href",vidhubServicesLastViewedLocal[e].url),$(".last-viewed").append("<strong>"+vidhubServicesLastViewedLocal[e].title+"</strong>")}}()});